<header class="app-header">
  <div class="wrap">
    <a class="brand" routerLink="/">
      <img src="/icon.svg" alt="TaskGroup logo" class="brand-logo" width="48" height="48" loading="eager" />
      <span class="brand-title">{{ 'common.appName' | translate }}</span>
    </a>
    <nav class="nav-links">
      <a class="nav-link" routerLink="/list" routerLinkActive="active">{{ 'projects.list.title' | translate }}</a>
      <a class="nav-link" routerLink="/contact" routerLinkActive="active">{{ 'header.nav.contact' | translate }}</a>
    </nav>
    <div class="spacer"></div>
    <div class="language-switcher" aria-label="{{ 'header.language.label' | translate }}">
      @for (lang of languages; track lang.code) {
        <button
          type="button"
          class="language-btn"
          [class.active]="language() === lang.code"
          (click)="changeLanguage(lang.code)"
        >
          <img
            class="language-flag"
            [src]="flagFor(lang.code)"
            [alt]="lang.labelKey | translate"
            width="28"
            height="28"
          />
        </button>
      }
    </div>
    <button class="btn ghost" type="button" (click)="toggleTheme()" aria-label="{{ 'header.theme.label' | translate }}">
      {{ theme() === 'dark' ? ('header.theme.light' | translate) : ('header.theme.dark' | translate) }}
    </button>
    @if (isAuthenticated() && user(); as currentUser) {
      <button class="pill pill-action" type="button" routerLink="/profile">
        {{ 'header.greeting' | translate }}, {{ currentUser.alias }}
      </button>
      <button class="btn danger" type="button" (click)="logout()">{{ 'header.logout' | translate }}</button>
    } @else {
      <span class="pill muted">{{ 'header.noSession' | translate }}</span>
    }
  </div>
</header>

<main class="container">
  @if (isAuthenticated()) {
    <router-outlet></router-outlet>
  } @else {
    <app-auth-panel></app-auth-panel>
  }
</main>

<footer class="footer">
  © {{ 'common.appName' | translate }} · 2025
</footer>
