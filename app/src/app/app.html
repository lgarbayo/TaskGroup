<header class="app-header">
  <div class="wrap">
    <a class="brand" routerLink="/">
      <img src="/appicon.png" alt="TaskGroup logo" class="brand-logo" width="34" height="34" loading="lazy" />
      {{ 'common.appName' | translate }}
    </a>
    <div class="spacer"></div>
    <select
      class="select-inline"
      [value]="language()"
      #languageSelect
      (change)="changeLanguage(languageSelect.value)"
      aria-label="{{ 'header.language.label' | translate }}"
    >
      @for (lang of languages; track lang.code) {
        <option [value]="lang.code">{{ lang.labelKey | translate }}</option>
      }
    </select>
    <button class="btn ghost" type="button" (click)="toggleTheme()">
      {{ theme() === 'dark' ? ('header.theme.light' | translate) : ('header.theme.dark' | translate) }}
    </button>
    @if (isAuthenticated() && user(); as currentUser) {
      <span class="pill">{{ 'header.greeting' | translate }}, {{ currentUser.alias }}</span>
      <button class="btn danger" type="button" (click)="logout()">{{ 'header.logout' | translate }}</button>
    } @else {
      <span class="pill muted">{{ 'header.noSession' | translate }}</span>
    }
  </div>
</header>

<main class="container">
  @if (isAuthenticated()) {
    <router-outlet></router-outlet>
  } @else {
    <app-auth-panel></app-auth-panel>
  }
</main>

<footer class="footer">
  © {{ 'common.appName' | translate }} · 2025
</footer>
